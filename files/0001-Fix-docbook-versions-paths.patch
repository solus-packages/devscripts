From bd8a855aaa29171b91023479abd52d22a332721b Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sun, 10 Jan 2016 00:11:17 +0000
Subject: [PATCH] Fix docbook versions/paths

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 po4a/Makefile             | 4 ++--
 scripts/Makefile          | 4 ++--
 scripts/deb-reversion.dbk | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/po4a/Makefile b/po4a/Makefile
index f19b24d..bf58190 100644
--- a/po4a/Makefile
+++ b/po4a/Makefile
@@ -28,7 +28,7 @@ de/%.de.1: de/%.de.pod translate
 	pod2man --utf8 --center=" " --release="Debian-Hilfswerkzeuge" $< > $@
 de/%.de.1: de/%.de.dbk translate
 	xsltproc --nonet -o $@ \
-	  /usr/share/sgml/docbook/stylesheet/xsl/nwalsh/manpages/docbook.xsl $<
+	  /usr/share/xml/docbook/xsl-stylesheets-1.77.1/manpages/docbook.xsl $<
 # xsltproc writes out to foo.1 even if you tell it to do otherwise, so we have
 # to rename the file after it's generated
 	mv de/$*.1 $@
@@ -41,7 +41,7 @@ fr/%.fr.1: fr/%.fr.pod translate
 	pod2man --utf8 --center=" " --release="Utilitaires Debian" $< > $@
 fr/%.fr.1: fr/%.fr.dbk translate
 	xsltproc --nonet -o $@ \
-	  /usr/share/sgml/docbook/stylesheet/xsl/nwalsh/manpages/docbook.xsl $<
+	  /usr/share/xml/docbook/xsl-stylesheets-1.77.1/manpages/docbook.xsl $<
 # xsltproc writes out to foo.1 even if you tell it to do otherwise, so we have
 # to rename the file after it's generated
 	mv fr/$*.1 $@
diff --git a/scripts/Makefile b/scripts/Makefile
index 797c78f..755f219 100644
--- a/scripts/Makefile
+++ b/scripts/Makefile
@@ -60,7 +60,7 @@ endif
 	pod2man --utf8 --center=" " --release="Debian Utilities" $< > $@
 %.1: %.dbk
 	xsltproc --nonet -o $@ \
-	  /usr/share/sgml/docbook/stylesheet/xsl/nwalsh/manpages/docbook.xsl $<
+	  /usr/share/xml/docbook/xsl-stylesheets-1.77.1/manpages/docbook.xsl $<
 
 # There is a slight chance this gets called twice, once here from here and once
 # from ../po4a/Makefile. Treat files with care.
@@ -86,7 +86,7 @@ test:
 	$(foreach python,$(shell py3versions -r ../debian/control),$(python) setup.py test$(\n))
 
 install: all
-	python3 setup.py install --root="$(DESTDIR)" --no-compile --install-layout=deb
+	python3 setup.py install --root="$(DESTDIR)" --no-compile
 	cp $(SCRIPTS) $(DESTDIR)$(BINDIR)
 	ln -sf edit-patch $(DESTDIR)$(BINDIR)/add-patch
 	install -d $(DESTDIR)$(COMPL_DIR)
diff --git a/scripts/deb-reversion.dbk b/scripts/deb-reversion.dbk
index 942f4e9..41b4e72 100644
--- a/scripts/deb-reversion.dbk
+++ b/scripts/deb-reversion.dbk
@@ -1,6 +1,6 @@
 <?xml version='1.0' encoding='ISO-8859-1'?>
 <!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
-"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
+"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
 
 <!--
 
-- 
2.7.0

